<h1 align="center">第 10 章 对象和类 学习笔记</h1>

### 👉【[复习题](./复习题.md)】【[编程练习题](./编程题.md)】

## 00. OOP的特性
面向对象编程（OOP）的特性：
- 抽象
- 封装和数据隐藏
- 多态
- 继承
- 代码的可重用性

## 01. 过程性和面向对象两种编程的区别
- 过程性编程
首先要考虑遵循的步骤，然后考虑如何表示这些数据（不需要程序一直运行。将数据存储到一个文件中，然后从文件中读取数据）。

- OOP编程
优先考虑数据（需要考虑如何表示数据，还要考虑如何使用数据）


## 02. 抽象和类
抽象和简化是处理复杂性问题的方法之一。

抽象是通往用户定义数据类型的捷径，在C++中，用户定义类型指的是 **`实现抽象接口的类设计`**。

### 2.1 类型是什么？
指定基本类型的三项工作：
- 决定数据对象需要的内存数量。
- 决定如何解释内存中的位
- 决定可使用数据对象执行的操作或方法

对内置类型有关的操作信息被内置到编译器中，而在C++中用户自定义的类型，则必须自己提供类型信息。

## 2.2 C++中的类
类是一种将抽象转换为用户定义类型的C++工具。将数据表示和操作数据的方法组合成一个包。

一般来说，类规范由两个部分组成：
- 类声明：提供类的蓝图
    > 以数据成员的方式描述数据部分，以成员函数（被称为方法）的方式描述公有接口。

- 类方法定义：提供细节
    > 描述如何实现类成员函数。

接口是一个共享框架，供两个系统交互时使用。

对于类（公共接口）的public 是使用类的程序，交互系统由类对象组成，而接口由编写类的人提供的方法组成。

***`要使用某个类，必须了解其公共接口；要编写类，必须创建其公共接口`***。

🚩 小Tips：C++程序员将`接口（类定义）`放在`头文件`中，将`实现（类方法的代码）`放在`源代码文件`中。

#### 2.2.1 类的定义
![](./img/类的格式.png)

👉 说明：不必在类声明中使用关键字 private，因为这是类对象的默认访问控制。

类设计尽可能将共有接口与实现细节分开。
- 公有接口表示设计的抽象组件。
    - 将实现细节`放在一起`并将其与抽象分开称为`封装`。
- 数据隐藏（将数据放在类的私有部分中）是一种封装。
    - 将实现的细节`隐藏在私有部分`中。
    - 优点：防止直接访问数据，让使用类的用户无需了解数据如何表示。

对于C++程序而言，一般使用类来实现类描述，将结构限制为只表示纯粹的数据对象。

无论类成员是数据成员还是成员函数，都可以在类的公有部分或私有部分中声明使用。但由于隐藏数据是OOP的目标之一，所以数据项一般放在私有部分，组成类接口的成员函数放在公有部分，否则无法从程序中调用这些函数。


## 2.3 实现类成员函数
创建类描述的第二部分：类声明中的原型表示的成员函数提供代码。成员函数与常规函数类似，但有特殊的特征：
- 定义成员函数时，使用`作用域解析运算符（::）`来标识函数所属的类。例如
    ```cpp
    void  Stock::update(double price);
    ```
- 类方法可访问类的private组件。

作用域解析运算符确定了方法定义对应的类的身份。
> 类中的其它成员函数互相使用彼此，不需要解析操作符，而在类声明和方法定义之外使用时，则需要使用。


定义位于`类声明中的函数`都将自动称为`内联函数`，类声明通常将短小的成员函数作为内联函数。也可在`类声明之外`定义成员函数，通过在`类实现部分中定义函数时`使用`inline限定符`使其成为内联函数。
> 内联函数一般也放在头文件中。

```cpp
class Stock
{
    private：
        ...
        void set_tot(); // 类声明内定义，但会转换为内联函数
    public：
        ...
};

inline void Stock::set_tot() //直接使用inline限定符将其变为它是类Stock的成员函数
{
    total_val = shares * shares_val;
}
```

要使用新类型，最关键是需要了解成员函数的功能，而不必考虑其实现细节。

### 2.4 小结
指定类设计的两个步骤：
- 提供类声明
    - 声明私有部分：声明的成员只能通过成员函数进行访问。
    - 声明公有部分：声明的成员可被使用类对象的程序直接访问。
    > 通常，数据成员放在私有部分，而成员函数放在公有部分。
- 实现类成员函数
    _ 在类声明中提供完整的函数定义、而不是函数原型。

## 03. 类的构造函数和析构函数
一般来说，最好在创建对象时对其自动进行初始化。
```cpp
Stock gift;
gift.buy(10,24.75);
```

C++提供一种特殊的成员函数 ------> **`类构造函数`**：专门用于构造新对象、将值赋给对应的数据成员。
> C++为成员函数提供名称和使用语法，而程序员需要提供方法定义。

⚠️注意：构造函数没有声明类型。


### 3.1 构造函数
C++使用构造函数来初始化对象的两种方式：
- 显式调用构造函数
    ```cpp
    Stock food = Stock("Tencent",20,450);
    ```
- 隐式调用构造函数
    ```cpp
    Stock garment("Furry Mason",50,2.5);
    // 与下面的显式调用等价
    Stock garment = Stock("Furry Mason",50,2.5);
    ```
每次创建类对象（甚至使用new动态分配内存）时，C++都使用类构造函数。

`构造函数被用来创建对象，而不能通过对象来调用`。

默认构造函数时在未提供显式初始值时，用来创建对象的构造函数。例如：
```cpp
Stock fluffy_the_cat; //默认构造函数
```
如果没有提供任何构造函数，则C++将自动提供默认构造函数（隐式版本吗，不做任何工作）。

默认构造函数没有参数，因为声明中不包含值。当且仅当没有定义任何构造函数时，编译器才会提供默认构造函数。
> 如果要创建对象，而不显式地初始化，则必须定义一个不接受任何参数的默认构造函数。

定义默认构造函数的方式有两种
- 给已有构造函数的所有参数提供默认值
    ```cpp
    Stock(const std::string & co = "Error",int n = 0,double pr = 0.0);
    ```
- 通过函数重载来定义另一个构造函数 ---- 一个没有参数的构造函数
    ```cpp
    Stock();
    ```
由于只能有一种默认构造函数，所以不能同时采用这两种方式。

程序例子code -----> 「[Stock00](./stock00)」

### 3.2 析构函数
用析构函数创建对象后，程序负责跟踪该对象，直到其过期为止。对象过期时，程序会自动调用一个特殊的成员函数 ---- **`析构函数`**。
> 析构函数主要是完成清理工作。只需要让编译器生成一个什么都不做的隐式析构函数即可。
对于析构函数来说，可以没有返回值和声明类型（如void也没有）。

析构函数`没有参数`，在类名前加上` ～`，所以其原型如下：
```cpp
~Stock();
```
析构函数不承担任何重要的工作，所以将它编写为不执行任何操作的函数。
```cpp
Stock::~Stock()
{
    cout<< "Bye, " << company << "\n";
}
```

析构函数的调用
- `静态存储类对象`：在程序`结束时`自动被调用。
- `自动存储类对象`：在程序`执行完代码块时`自动被调用。
- `new创建的对象`：将驻留在栈内存或自由存储区，`使用delete来释放内存时`，将自动被调用。
- `临时对象`：将在`结束对该对象的使用时`自动调用析构函数。

由于类对象过期时析构函数将自动被调用，因此必须有一个析构函数。
> 如果程序中没有提供析构函数，编译器将隐式地声明一个默认析构函数，并发现导致对象被删除的代码后，提供默认析构函数的定义。

程序例子code -----> 「[Stock10](./stock10)」

👉 小 Tips：`如果既可以通过初始化，也可通过赋值来设置对象的值，则是优先选择初始化方式`。

const成员函数，保证函数不会修改调用对象。C++的解决方法：将const关键字放在函数的括号后面。
```cpp
void show() const; //声明

void Stock::show() const; //函数定义的开头
```

### 3.3 小结



## 04. this指针


## 5. 对象数组


## 6. 类作用域

## 7. 抽象数据类型









